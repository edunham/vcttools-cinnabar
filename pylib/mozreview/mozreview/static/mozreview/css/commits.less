/*
 * We need to copy a few definitions from rb because there's a bug
 * that prevents to import a less file from another application.
 * See https://bugzilla.mozilla.org/show_bug.cgi?id=1168436 for more info.
 */
.border-radius(...) {
  -moz-border-radius: @arguments;
  -webkit-border-radius: @arguments;
  border-radius: @arguments;
}

@issue-opened-bg: #fff4B0;
@issue-opened-border-color: darken(@issue-opened-bg, 40%);
@issue-opened-link-color: darken(@issue-opened-bg, 60%);

/*******************************************************/

@import (reference) 'mozilla-theme-common.less';

@approval-bg: #DFFFD7;
@approval-border-color: #478A06;

#mozreview-request-series{
  margin-top:5px;
}

.help-icon {
  display: inline-block;
  text-align: center;
  background-color: #D1D1D1;
  border-radius: 50%;
  height: 15px;
  width: 15px;
  border: 1px solid #3E3E3E;
  cursor: default;
  margin-top: -1px;
}

#mozreview-child-requests {
  width: 100%;
  table-layout: fixed;
  border-spacing: 0px;
  border-collapse: collapse;
  margin-top:10px;
  min-width: 653px;
  border-top: 1px solid #C1C1C1;
  border-right: 1px solid #C1C1C1;

  tr, td {
    text-align: left;
  }

  .truncate_text {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100%;
  }

  .commits {
    width: 60%;

    ul {
      font-size: 90%;
      list-style-type: none;
      margin: 0;
      padding: 6px 0;

      li {
        display: inline-block;
        padding-right: 10px;
        margin-right: 10px;
      }

      a {
        color: #666;
        text-decoration: none;

        &:hover, &:active, &:focus {
          text-decoration: underline;
        }
      }
    }
  }

  .mozreview-child-reviewer-list {
    min-width: 100px;
  }

  .reviewer-name {
    min-height: 10px;
    display: inline-block;

    &.reviewer-ship-it {
      background-color: @approval-bg;
      border: 1px solid @approval-border-color;
      padding: 1px 5px;
      .border-radius(2px);
    }
    &.review-pending::after {
      content: " (r?)";
    }
    &.review-granted::after {
      content: " (r+)";
    }
    &.review-denied::after {
      content: " (r-)";
    }
    &.review-cleared{
      color: grey;
    }
    &.review-cleared::after {
      content: " (r? cleared)";
    }
  }

  .status {
    width: 90px;
    white-space: nowrap;
  }

  tbody > tr {
    background: #fff;
  }

  .mozreview_commit_summary {
    font-weight: bold;
    text-decoration: none;

    &:hover, &:active, &:focus {
      text-decoration: underline;
    }
  }

  .diffstat-insert {
    color: green;
  }

  .diffstat-delete {
    color: #a02222;
  }

  & > tbody > tr[current="true"],
  & > tbody > tr:hover {
    background-color: #eee;
  }

 td,
 th {
   padding: 5px;
   border-left: 1px solid #C1C1C1;
   border-bottom: 1px solid #C1C1C1;
 }

 & > thead > tr {
   background: @moz-blue-dark;
 }

 & > tbody td > a.commit_sha {
   font-family: monospace;
 }

 .reviewers {
   .inline-editor-form {
     white-space: normal;
   }
   input[type=text] {
     min-width: 100px;
   }
   .buttons {
     white-space: nowrap;
   }
 }

 /* This was copied from the rb dashboard less file.*/
  .status {
    text-align: center;
  }

  .no-approval {
    cursor: default;
  }

  .approval {
    cursor: default;
    background-color: @approval-bg;
  }

  .approval-issues {
    background: #fff4B0;
    position: relative;
  }

  .issue-count {
    text-decoration: none;
    color: inherit;
    display: block;
    padding: 10px 0;
   }

  .shipit-count {
    background-image: url("../shipit_bg.png");
    background-position: top left;
    background-repeat: repeat-x;
    background-color: #6bc810;
    border: 1px solid @approval-border-color;
    color: #205003;
  }
}

#error-container {
  &:not([haserror="true"]) {
    display: none;
  }

  border: 1px solid red;
  background-color: #ffb2b2;
  padding: 15px;

  h1 {
    font-size: 1.3em;
    font-weight: bold;
  }

  #error-stack {
    display: none;
  }

  #error-stack-toggle {
    display: block;
  }

  #error-close {
    display: block;
    margin-top: 1.5em;
  }
}

#automation-menu + .menu a {
  opacity: 0.5;
}


#ci-actions {
  border: 1px solid #B8B5A0;
  margin-top: 20px;
  padding: 5px;
  background-color: #FFFFFF;

  .action {

    & > .action-icon {
      float: left;
      margin-right: 5px;
    }

    & > .rounded-icon {
      border-radius: 50%;
      width: 10px;
      height: 10px;
      margin: 1px 3px 4px 0px;
    }

    &.action-success {
      & > .rounded-icon {
        background-color: #B0EFA0;
        border: 1px solid @approval-border-color;
      }
    }

    &.action-pending {
      & > .rounded-icon {
        background-color: #E6E316;
        border: 1px solid #6F6F6F;
      }
    }

    &.action-failure {
      & > .rounded-icon {
        background-color: #A9020C;
        border: 1px solid #90010A;
      }
      & .action-heading {
        color: #90010A;
      }
    }

    & > .action-info {
      a {
        float:right;
      }
      h4 {
        margin: 0;
      }
      span.action-meta {
        display:block;
        overflow:hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }
    }
  }

  .action-separator{
    background-color: #E4E3DD;
    height:1px;
    margin: 5px;
  }
}

#local-draft-banner {
  margin-top: 10px;
  margin-bottom: -10px;
  border-bottom: none;
  border-bottom-left-radius: 0;
  border-bottom-right-radius: 0;
}
